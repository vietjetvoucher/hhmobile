<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêang b·∫£o tr√¨ - Quay l·∫°i sau nh√©!</title>
    <!-- Tailwind CSS CDN ƒë·ªÉ d·ªÖ d√†ng styling ƒë·∫πp m·∫Øt v√† responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* T√πy ch·ªânh font Inter */
        body {
            font-family: "Inter", sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f0f2f5; /* M√†u n·ªÅn nh·∫π nh√†ng */
            color: #333; /* M√†u ch·ªØ ch√≠nh */
        }
        /* ƒê·∫£m b·∫£o canvas responsive */
        #dino-canvas {
            background-color: #f7f7f7;
            border: 2px solid #ccc;
            border-radius: 8px;
            display: block; /* Lo·∫°i b·ªè kho·∫£ng tr·∫Øng d∆∞·ªõi canvas */
            width: 100%; /* Chi·ªÅu r·ªông linh ho·∫°t */
            max-width: 700px; /* TƒÉng gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa */
            height: 150px; /* Chi·ªÅu cao c·ªë ƒë·ªãnh */
            margin: 0 auto; /* CƒÉn gi·ªØa */
            cursor: pointer; /* Thay ƒë·ªïi con tr·ªè khi di chu·ªôt v√†o */
            touch-action: manipulation; /* T·ªëi ∆∞u h√≥a cho c·∫£m ·ª©ng, tr√°nh h√†nh vi m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát */
        }

        /* Th√™m hi·ªáu ·ª©ng cho n√∫t */
        .btn-restart {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-restart:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .btn-restart:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 sm:p-6 bg-gray-100">

    <div class="bg-white p-6 sm:p-10 rounded-xl shadow-lg text-center max-w-lg w-full mb-8">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800 mb-4">üöß Trang web ƒëang b·∫£o tr√¨ üöß</h1>
        <p class="text-lg sm:text-xl text-gray-600 mb-6">
            Ch√∫ng t√¥i ƒëang n√¢ng c·∫•p v√† c·∫£i thi·ªán trang web ƒë·ªÉ mang l·∫°i tr·∫£i nghi·ªám t·ªët h∆°n cho b·∫°n.
            Vui l√≤ng quay l·∫°i sau √≠t ph√∫t nh√©!
        </p>
        <p class="text-base sm:text-lg text-gray-500">
            Trong l√∫c ch·ªù ƒë·ª£i, b·∫°n c√≥ th·ªÉ gi·∫£i tr√≠ v·ªõi tr√≤ ch∆°i Doraemon b√™n d∆∞·ªõi.
            <span class="font-semibold text-blue-600">Nh·∫•n v√†o khung ho·∫∑c ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu ch∆°i!</span> üòä
        </p>
    </div>

    <div class="relative w-full max-w-lg" style="max-width: 700px;"> <!-- C·∫≠p nh·∫≠t max-width cho khung ch·ª©a canvas -->
        <canvas id="dino-canvas"></canvas>
        <button id="restart-button" class="btn-restart absolute bottom-4 left-1/2 -translate-x-1/2 px-6 py-3 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 hidden">
            Ch∆°i L·∫°i
        </button>
    </div>

    <script>
        // L·∫•y tham chi·∫øu ƒë·∫øn canvas v√† context 2D
        const canvas = document.getElementById('dino-canvas');
        const ctx = canvas.getContext('2d');
        const restartButton = document.getElementById('restart-button');

        // K√≠ch th∆∞·ªõc game c·ªë ƒë·ªãnh (s·∫Ω scale theo CSS)
        const GAME_WIDTH = 700; // TƒÉng chi·ªÅu r·ªông khung game
        const GAME_HEIGHT = 150;

        // C·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc canvas th·ª±c t·∫ø ƒë·ªÉ n·ªôi dung kh√¥ng b·ªã m·ªù
        canvas.width = GAME_WIDTH;
        canvas.height = GAME_HEIGHT;

        // Tr·∫°ng th√°i game
        let isRunning = false;
        let score = 0;
        let highScore = localStorage.getItem('dinoHighScore') ? parseInt(localStorage.getItem('dinoHighScore')) : 0;
        let gameOver = false;
        let gameSpeed = 3; // Gi·∫£m t·ªëc ƒë·ªô ban ƒë·∫ßu
        let frame = 0; // ƒê·ªÉ t√≠nh to√°n th·ªùi gian v√† t·∫ßn su·∫•t xu·∫•t hi·ªán v·∫≠t c·∫£n

        // ƒê·ªëi t∆∞·ª£ng Doraemon (thay ƒë·ªïi k√≠ch th∆∞·ªõc ƒë·ªÉ ph√π h·ª£p v·ªõi h√¨nh v·∫Ω)
        const dino = {
            x: 20,
            y: GAME_HEIGHT - 35, // ƒê·∫∑t Doraemon tr√™n m·∫∑t ƒë·∫•t
            width: 30, // Chi·ªÅu r·ªông c·ªßa v√πng va ch·∫°m
            height: 35, // Chi·ªÅu cao c·ªßa v√πng va ch·∫°m
            dy: 0, // V·∫≠n t·ªëc nh·∫£y
            gravity: 0.5, // L·ª±c h√∫t
            jumpPower: -10, // L·ª±c ƒë·∫©y khi nh·∫£y
            isJumping: false,
            groundY: GAME_HEIGHT - 35 // V·ªã tr√≠ m·∫∑t ƒë·∫•t c·ªßa Doraemon
        };

        // M·∫£ng ch·ª©a c√°c v·∫≠t c·∫£n (robot chu·ªôt)
        let cacti = [];
        const cactusMinGap = 150; // Kho·∫£ng c√°ch t·ªëi thi·ªÉu gi·ªØa c√°c robot chu·ªôt (tƒÉng ƒë·ªÉ ph√π h·ª£p v·ªõi chi·ªÅu r·ªông m·ªõi)
        const cactusMaxGap = 400; // Kho·∫£ng c√°ch t·ªëi ƒëa (tƒÉng ƒë·ªÉ ph√π h·ª£p v·ªõi chi·ªÅu r·ªông m·ªõi)
        let nextCactusDistance = 0; // Kho·∫£ng c√°ch ƒë·∫øn robot chu·ªôt ti·∫øp theo

        // H√†m v·∫Ω Doraemon
        function drawDino() {
            // V·ªã tr√≠ t√¢m c·ªßa Doraemon ƒë·ªÉ v·∫Ω d·ªÖ h∆°n
            const centerX = dino.x + dino.width / 2;
            const centerY = dino.y + dino.height / 2;

            // ƒê·∫ßu v√† th√¢n Doraemon
            ctx.fillStyle = '#1e90ff'; // M√†u xanh d∆∞∆°ng
            ctx.beginPath();
            ctx.arc(centerX, centerY, 15, 0, Math.PI * 2); // H√¨nh tr√≤n th√¢n
            ctx.fill();

            // M·∫∑t tr·∫Øng
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 2, 12, 0, Math.PI * 2);
            ctx.fill();

            // M·∫Øt
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(centerX - 5, centerY - 7, 2, 0, Math.PI * 2);
            ctx.arc(centerX + 5, centerY - 7, 2, 0, Math.PI * 2);
            ctx.fill();

            // M≈©i ƒë·ªè
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 2, 3, 0, Math.PI * 2);
            ctx.fill();

            // R√¢u (ƒë∆°n gi·∫£n h√≥a)
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 0.5;
            ctx.beginPath();
            ctx.moveTo(centerX - 10, centerY); ctx.lineTo(centerX + 10, centerY);
            ctx.moveTo(centerX - 10, centerY - 3); ctx.lineTo(centerX + 10, centerY - 3);
            ctx.moveTo(centerX - 10, centerY + 3); ctx.lineTo(centerX + 10, centerY + 3);
            ctx.stroke();

            // Mi·ªáng
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.arc(centerX, centerY + 5, 8, 0, Math.PI); // N·ª• c∆∞·ªùi
            ctx.stroke();

            // C·ªï √°o v√† chu√¥ng (ƒë∆°n gi·∫£n)
            ctx.fillStyle = 'red';
            ctx.fillRect(centerX - 10, centerY + 12, 20, 3); // C·ªï √°o
            ctx.fillStyle = 'yellow';
            ctx.beginPath();
            ctx.arc(centerX, centerY + 16, 3, 0, Math.PI * 2); // Chu√¥ng
            ctx.fill();
        }

        // H√†m v·∫Ω Robot Chu·ªôt
        function drawCactus(cactus) {
            ctx.fillStyle = '#A9A9A9'; // M√†u x√°m c·ªßa robot
            
            // Th√¢n chu·ªôt
            ctx.fillRect(cactus.x, cactus.y, cactus.width, cactus.height);

            // Tai
            ctx.beginPath();
            ctx.arc(cactus.x + 5, cactus.y, 5, 0, Math.PI * 2); // Tai tr√°i
            ctx.arc(cactus.x + cactus.width - 5, cactus.y, 5, 0, Math.PI * 2); // Tai ph·∫£i
            ctx.fill();

            // M·∫Øt robot (v√≠ d·ª•: ch·∫•m ƒë·ªè)
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(cactus.x + cactus.width / 2 - 4, cactus.y + 5, 2, 0, Math.PI * 2);
            ctx.arc(cactus.x + cactus.width / 2 + 4, cactus.y + 5, 2, 0, Math.PI * 2);
            ctx.fill();
            
            // ƒêu√¥i (m·ªôt ƒë∆∞·ªùng th·∫≥ng)
            ctx.strokeStyle = '#A9A9A9';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(cactus.x + cactus.width, cactus.y + cactus.height / 2);
            ctx.lineTo(cactus.x + cactus.width + 8, cactus.y + cactus.height / 2 - 5);
            ctx.stroke();
        }

        // H√†m c·∫≠p nh·∫≠t tr·∫°ng th√°i Doraemon
        function updateDino() {
            if (dino.isJumping) {
                dino.dy += dino.gravity; // √Åp d·ª•ng tr·ªçng l·ª±c
                dino.y += dino.dy; // C·∫≠p nh·∫≠t v·ªã tr√≠ Y

                // N·∫øu Doraemon ch·∫°m ƒë·∫•t
                if (dino.y >= dino.groundY) {
                    dino.y = dino.groundY;
                    dino.isJumping = false;
                    dino.dy = 0;
                }
            }
        }

        // H√†m t·∫°o v·∫≠t c·∫£n m·ªõi (gi·ªù l√† robot chu·ªôt)
        function createCactus() {
            const minWidth = 20; // Chi·ªÅu r·ªông t·ªëi thi·ªÉu c·ªßa robot chu·ªôt
            const maxWidth = 30; // Chi·ªÅu r·ªông t·ªëi ƒëa
            const minHeight = 20; // Chi·ªÅu cao t·ªëi thi·ªÉu
            const maxHeight = 30; // Chi·ªÅu cao t·ªëi ƒëa

            const width = minWidth + Math.random() * (maxWidth - minWidth);
            const height = minHeight + Math.random() * (maxHeight - minHeight);
            const x = GAME_WIDTH + width; // B·∫Øt ƒë·∫ßu ngo√†i m√†n h√¨nh b√™n ph·∫£i
            const y = GAME_HEIGHT - height; // ƒê·∫∑t tr√™n m·∫∑t ƒë·∫•t

            cacti.push({ x, y, width, height });
            // T√≠nh to√°n kho·∫£ng c√°ch ƒë·∫øn robot chu·ªôt ti·∫øp theo
            nextCactusDistance = cactusMinGap + Math.random() * (cactusMaxGap - cactusMinGap);
        }

        // H√†m c·∫≠p nh·∫≠t tr·∫°ng th√°i c√°c v·∫≠t c·∫£n (robot chu·ªôt)
        function updateCacti() {
            // Di chuy·ªÉn robot chu·ªôt
            for (let i = 0; i < cacti.length; i++) {
                cacti[i].x -= gameSpeed;
            }

            // X√≥a robot chu·ªôt ƒë√£ ƒëi qua m√†n h√¨nh
            cacti = cacti.filter(cactus => cactus.x + cactus.width > 0);

            // Th√™m robot chu·ªôt m·ªõi n·∫øu c·∫ßn
            frame++;
            if (frame >= nextCactusDistance / gameSpeed) { // ƒêi·ªÅu ch·ªânh t·∫ßn su·∫•t xu·∫•t hi·ªán theo t·ªëc ƒë·ªô game
                createCactus();
                frame = 0;
            }
        }

        // H√†m ki·ªÉm tra va ch·∫°m
        function checkCollision() {
            for (let i = 0; i < cacti.length; i++) {
                const c = cacti[i];

                // Ki·ªÉm tra va ch·∫°m AABB (Axis-Aligned Bounding Box)
                if (dino.x < c.x + c.width &&
                    dino.x + dino.width > c.x &&
                    dino.y < c.y + c.height &&
                    dino.y + dino.height > c.y) {
                    return true; // Va ch·∫°m x·∫£y ra
                }
            }
            return false; // Kh√¥ng va ch·∫°m
        }

        // H√†m v·∫Ω ƒëi·ªÉm s·ªë
        function drawScore() {
            ctx.fillStyle = '#555';
            ctx.font = '16px "Inter", sans-serif';
            ctx.textAlign = 'right';
            ctx.fillText('ƒêi·ªÉm: ' + score.toFixed(0), GAME_WIDTH - 10, 20); // L√†m tr√≤n ƒëi·ªÉm
            ctx.fillText('Cao nh·∫•t: ' + highScore, GAME_WIDTH - 10, 40);
        }

        // H√†m hi·ªÉn th·ªã th√¥ng b√°o "Game Over"
        function drawGameOver() {
            ctx.fillStyle = '#555';
            ctx.font = '24px "Inter", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', GAME_WIDTH / 2, GAME_HEIGHT / 2 - 10);
            ctx.font = '16px "Inter", sans-serif';
            ctx.fillText('Nh·∫•n ƒë·ªÉ ch∆°i l·∫°i', GAME_WIDTH / 2, GAME_HEIGHT / 2 + 20);
            restartButton.classList.remove('hidden'); // Hi·ªÉn th·ªã n√∫t ch∆°i l·∫°i
        }

        // H√†m nh·∫£y cho Doraemon
        function jump() {
            if (!isRunning && !gameOver) { // N·∫øu game ch∆∞a ch·∫°y v√† ch∆∞a game over
                isRunning = true; // B·∫Øt ƒë·∫ßu game
                gameLoop(); // B·∫Øt ƒë·∫ßu v√≤ng l·∫∑p game th·ª±c s·ª±
            }

            if (!dino.isJumping && !gameOver) {
                dino.dy = dino.jumpPower;
                dino.isJumping = true;
            } else if (gameOver) {
                resetGame(); // N·∫øu game over, nh·∫•n ƒë·ªÉ ch∆°i l·∫°i
            }
        }

        // X·ª≠ l√Ω s·ª± ki·ªán nh·∫•n ph√≠m (d√πng cho m√°y t√≠nh)
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.key === ' ') {
                jump();
            }
        });

        // X·ª≠ l√Ω s·ª± ki·ªán click/touch tr√™n canvas (d√πng cho c·∫£ m√°y t√≠nh v√† ƒëi·ªán tho·∫°i)
        canvas.addEventListener('mousedown', jump);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault(); // NgƒÉn ch·∫∑n cu·ªôn trang tr√™n di ƒë·ªông khi ch·∫°m v√†o canvas
            jump();
        });
        restartButton.addEventListener('click', resetGame);

        // H√†m kh·ªüi ƒë·ªông/ch·∫°y l·∫°i game
        function resetGame() {
            score = 0;
            gameSpeed = 3; // ƒê·∫∑t l·∫°i t·ªëc ƒë·ªô ban ƒë·∫ßu khi ch∆°i l·∫°i
            gameOver = false;
            dino.y = dino.groundY;
            dino.dy = 0;
            dino.isJumping = false;
            cacti = []; // X√≥a t·∫•t c·∫£ robot chu·ªôt
            frame = 0;
            isRunning = true; // ƒê·∫£m b·∫£o isRunning l√† true khi ch∆°i l·∫°i
            restartButton.classList.add('hidden'); // ·∫®n n√∫t ch∆°i l·∫°i
            gameLoop(); // B·∫Øt ƒë·∫ßu l·∫°i v√≤ng l·∫∑p game
        }

        // V√≤ng l·∫∑p ch√≠nh c·ªßa tr√≤ ch∆°i
        function gameLoop() {
            if (!isRunning && !gameOver) {
                // Hi·ªÉn th·ªã th√¥ng b√°o h∆∞·ªõng d·∫´n khi game ch∆∞a ch·∫°y l·∫ßn ƒë·∫ßu
                ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
                ctx.fillStyle = '#555';
                ctx.font = '20px "Inter", sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('Ch·∫°m/Nh·∫•n ƒë·ªÉ ch∆°i', GAME_WIDTH / 2, GAME_HEIGHT / 2);
                requestAnimationFrame(gameLoop); // Ti·∫øp t·ª•c g·ªçi ƒë·ªÉ hi·ªÉn th·ªã th√¥ng b√°o
                return;
            }

            if (gameOver) {
                drawGameOver();
                return;
            }

            // X√≥a canvas
            ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

            // C·∫≠p nh·∫≠t v√† v·∫Ω Doraemon
            updateDino();
            drawDino();

            // C·∫≠p nh·∫≠t v√† v·∫Ω robot chu·ªôt
            updateCacti();
            cacti.forEach(drawCactus);

            // C·∫≠p nh·∫≠t ƒëi·ªÉm v√† t·ªëc ƒë·ªô
            score += 0.1; // TƒÉng ƒëi·ªÉm li√™n t·ª•c
            if (score > highScore) {
                highScore = Math.floor(score);
                localStorage.setItem('dinoHighScore', highScore); // L∆∞u ƒëi·ªÉm cao nh·∫•t
            }
            if (Math.floor(score) % 100 === 0 && Math.floor(score) > 0) {
                gameSpeed += 0.05; // TƒÉng nh·∫π t·ªëc ƒë·ªô sau m·ªói 100 ƒëi·ªÉm
            }
            drawScore();

            // Ki·ªÉm tra va ch·∫°m
            if (checkCollision()) {
                gameOver = true;
            }

            // Ti·∫øp t·ª•c v√≤ng l·∫∑p
            requestAnimationFrame(gameLoop);
        }

        // B·∫Øt ƒë·∫ßu v√≤ng l·∫∑p game khi trang ƒë∆∞·ª£c t·∫£i
        window.onload = gameLoop;
    </script>
</body>
</html>
